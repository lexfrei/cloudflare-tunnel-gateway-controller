# Cloudflare API credentials
# Create with:
#   kubectl create secret generic cloudflare-credentials \
#     --namespace cloudflare-tunnel-system \
#     --from-literal=api-token="your-api-token"
apiVersion: v1
kind: Secret
metadata:
  name: cloudflare-credentials
  namespace: cloudflare-tunnel-system
type: Opaque
stringData:
  api-token: "your-cloudflare-api-token"
---
# Tunnel token for cloudflared connector
# Get from: Zero Trust Dashboard > Networks > Tunnels > Configure
# Create with:
#   kubectl create secret generic cloudflare-tunnel-token \
#     --namespace cloudflare-tunnel-system \
#     --from-literal=tunnel-token="your-tunnel-token"
apiVersion: v1
kind: Secret
metadata:
  name: cloudflare-tunnel-token
  namespace: cloudflare-tunnel-system
type: Opaque
stringData:
  tunnel-token: "your-tunnel-token-from-dashboard"
---
# AWG config (optional - only for AmneziaWG sidecar)
# See docs/AWG_QUICKSTART.md for detailed setup instructions
# Create with:
#   kubectl create secret generic awg-config \
#     --namespace cloudflare-tunnel-system \
#     --from-file=wg0.conf=your-awg-config.conf
apiVersion: v1
kind: Secret
metadata:
  name: awg-config
  namespace: cloudflare-tunnel-system
type: Opaque
stringData:
  wg0.conf: |
    [Interface]
    Address = 10.x.x.x/32
    PrivateKey = your-private-key
    # AWG-specific obfuscation parameters (get from your AWG server)
    Jc = 2
    Jmin = 10
    Jmax = 50
    S1 = 32
    S2 = 115
    H1 = 1313297875
    H2 = 13518962
    H3 = 1721880616
    H4 = 1243767569

    [Peer]
    PublicKey = peer-public-key
    PresharedKey = optional-preshared-key
    # IMPORTANT: AllowedIPs must include ALL Cloudflare IP ranges
    # Source: https://www.cloudflare.com/ips/
    AllowedIPs = 173.245.48.0/20, 103.21.244.0/22, 103.22.200.0/22, 103.31.4.0/22, 141.101.64.0/18, 108.162.192.0/18, 190.93.240.0/20, 188.114.96.0/20, 197.234.240.0/22, 198.41.128.0/17, 162.158.0.0/15, 104.16.0.0/13, 104.24.0.0/14, 172.64.0.0/13, 131.0.72.0/22
    Endpoint = your-awg-server:port
    PersistentKeepalive = 25
